{{define "form/mtproto"}}
<a-form :colon="false" :label-col="{ md: {span:8} }" :wrapper-col="{ md: {span:14} }">
    <a-form-item>
        <template slot="label">
            <a-tooltip>
                <template slot="title">
                    <span>{{ i18n "pages.inbounds.mtprotoSecretDesc" }}</span>
                </template>
                {{ i18n "pages.inbounds.mtprotoSecret" }}
                <a-icon type="question-circle"></a-icon>
            </a-tooltip>
        </template>
        <a-input v-model.trim="inbound.settings.users[0].secret" @change="inbound.settings.users[0].secret = (inbound.settings.users[0].secret || '').toLowerCase()">
            <a-button slot="addonAfter" icon="sync" @click="inbound.settings.users[0].secret = RandomUtil.randomSeq(32, { type: 'hex' })">
                {{ i18n "check" }}
            </a-button>
        </a-input>
        <a-space style="margin-top: 8px;">
            <a-button size="small" icon="copy" @click="ClipboardManager.copyText(inbound.settings.users[0].secret).then(() => $message.success('{{ i18n "copied" }}'))">
                {{ i18n "copy" }}
            </a-button>
        </a-space>
    </a-form-item>
    <a-form-item label='{{ i18n "pages.inbounds.copyLink" }}'>
        <a-input :value="`tg://proxy?server=${encodeURIComponent((inbound.listen && inbound.listen !== '0.0.0.0') ? inbound.listen : location.hostname)}&port=${encodeURIComponent(inbound.port)}&secret=${encodeURIComponent((inbound.settings.users[0].secret || '').toLowerCase())}`" readonly>
            <a-button slot="addonAfter" icon="copy"
                @click="ClipboardManager.copyText(`tg://proxy?server=${encodeURIComponent((inbound.listen && inbound.listen !== '0.0.0.0') ? inbound.listen : location.hostname)}&port=${encodeURIComponent(inbound.port)}&secret=${encodeURIComponent((inbound.settings.users[0].secret || '').toLowerCase())}`).then(() => $message.success('{{ i18n "copied" }}'))">
                {{ i18n "copy" }}
            </a-button>
        </a-input>
    </a-form-item>
</a-form>
{{end}}
